data_2016 <- sasxport.get(file = "data/LLCP2016.XPT")
library(knitr)
library(foreign)
library(survey)
library(Hmisc)
library(dplyr)
library(tidyr)
library(ggplot2)
data_2016 <- sasxport.get(file = "data/LLCP2016.XPT")
state_id <- read.csv("data/state_table.csv")
colnames(state_id)[colnames(state_id)=="value"] <- "x.state"
joined_df <- left_join(data_2016, state_id, by = "x.state")
data_2016 <- sasxport.get(file = "data/LLCP2016.XPT")
state_id <- read.csv("data/state_table.csv")
colnames(state_id)[colnames(state_id)=="value"] <- "x.state"
joined_df <- join(data_2016, state_id, by = "x.state", type = "left")
state_id <- read.csv("data/state_table.csv")
colnames(state_id)[colnames(state_id)=="value"] <- "x.state"
joined_df <- join(data_2016, state_id, by = "x.state", type = "left")
#binge drinking
joined_df <- joined_df %>%
mutate(
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 1, 0),
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 2, 1),
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 9, NA),
)
library(knitr)
library(foreign)
library(survey)
library(Hmisc)
library(dplyr)
library(tidyr)
library(ggplot2)
joined_df <- left_join(data_2016, state_id, by = "x.state")
joined_df <- joined_df %>%
mutate(
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 1, 0),
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 2, 1),
x.rfbing5 = replace(x.rfbing5, x.rfbing5 == 9, NA),
)
joined_df <- joined_df %>%
mutate(
alcday5 = replace(alcday5, 101 >= alcday5 & alcday5 <= 107, 1),
alcday5 = replace(alcday5, 201 >= alcday5 & alcday5 <= 230, 1),
alcday5 = replace(alcday5, alcday5 == 777 | alcday5 == 999, NA),
alcday5 = replace(alcday5, alcday5 == 888, 0)
)
# drink any alcoholic beverages in past 30 days
joined_df <- joined_df %>%
mutate(
drnkany5 = replace(drnkany5, drnkany5 == 2, 0),
drnkany5 = replace(drnkany5, drnkany5 == 7, NA),
drnkany5 = replace(drnkany5, drnkany5 == 9, NA)
)
# heavy drinking
joined_df <- joined_df %>%
mutate(
x.rfdrhv5 = replace(x.rfdrhv5, x.rfdrhv5 == 1, 0),
x.rfdrhv5 = replace(x.rfdrhv5, x.rfdrhv5 == 2, 1),
x.rfdrhv5 = replace(x.rfdrhv5, x.rfdrhv5 == 9, NA)
)
heavy_drinking <- svymean(~x.rfdrhv5, design, na.rm = T)
data_2011 <- read.csv("data/2011.csv")
setwd("~/Desktop/HealthReport-TeamBug/Overall-Claire")
data_2011 <- read.csv("data/2011.csv")
View(data_20``)
View(data_2011)
View(data_2011)
data_2012 <- read.csv("data/2012.csv")
data_2013 <- read.csv("data/2013.csv")
data_2014 <- read.csv("data/2014.csv")
data <- read.csv("data/Multiple Cause of Death, 1999-2017.txt")
View(data)
colnames(data)
data <- read.csv("data/Multiple Cause of Death, 1999-2017.txt")
data <- read.csv("data/master.csv")
data$country
USA_DF <- filter(data, country == "United States")
colnames(data)
USA_DF <- filter(data, country == "United States")
USA_DF <- data %>% filter(country == "United States")
USA_DF <- data %>% filter(country == "United States")
library(tidyr)
USA_DF <- data %>% filter(country == "United States")
USA_DF <- data %>% filter(data$country == "United States")
View(USA_DF)
USA_DF <- data %>% filter(country == "United States")
data <- read.csv("data/master.csv")
data <- read.csv("data/master.csv")
USA_DF <- data %>% filter(country == "United States")
colnames(data)
data$country
USA_DF <- data %>% filter(country == "United States")
data$country
USA_DF <- data %>% filter(country == "United States	")
USA_DF <- data %>% filter(country == "United States	")
USA_DF <- data %>% filter(country == "United States	")
USA_DF <- data %>% filter(country == "United States	")
USA_DF <- data %>% filter(country == "United States	")
USA_DF <- data %>% filter(country == "United States")
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis 2.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis 2.R')
USA_DF <- data %>% filter(country == "United States")
summary_sa <- USA_DF %>% group_by(year) %>% summarise(suicide_total = sum(suicides_no),population_total = sum(population))
View(summary_sa)
gathered <- gather(summary_sa, year, 2:3)
gathered <- gather(summary_sa, value, 2:3)
gathered <- gather(summary_sa, value, 2:3)
gathered <- summary_sa %>%
gather(category, value, 2:3)
View(gathered)
p1 <- ggplot(gathered)+
geom_col(
mapping = aes(x= year, y = value, fill = category), position = "dodge"
)+
coord_flip()
p1
summary_sa <- summary_sa %>% mutate(percentage = suicide_total/population_total)
summary_sa <- summary_sa %>% mutate(percentage = suicide_total/population_total*100)
p1 <- ggplot(summary_sa)+
geom_col(
mapping = aes(x= year, y = percentage)
)+
coord_flip()
p1
p1 <- ggplot(summary_sa,aes(x= year, y = percentage))+
geom_point()+
geom_line()
p1
p1 <- ggplot(summary_sa,aes(x= year, y = percentage))+
geom_point()+
geom_line()+
labs(
title = "Suicide Rates Cross Years"
)
ggsave(file = "suicide_cross_year.pdf", path = "charts/")
p1 <- ggplot(summary_sa,aes(x= year, y = percentage))+
geom_point()+
geom_line()+
labs(
title = "Suicide Rates Cross Years"
)
ggsave(file = "suicide_cross_year.pdf", path = "chart/")
library(dplyr)
library(ggplot2)
library(tidyr)
data <- read.csv("data/intentional_self_harm_data.csv")
View(data)
data$state = substr(data$state,1, nchar(data$state)-5)
data$State = substr(data$State,1, nchar(data$State)-5)
data$State = substr(data$State,1, 5)
data$State = substr(data$State,1, 10)
data$State = substr(data$State,1, 10)
data <- read.csv("data/intentional_self_harm_data.csv")
data$state = substr(data$state,1, nchar(data$state)-5)
data[1,1]
data$state <- substr(data$state,1, nchar(data$state)-5)
data$state <- lapply(data$State, substr(1,nchar(data$state)-5))
data$state <- lapply(data$State, substr((data$Stat,1,nchar(data$state)-5))
data$state <- lapply(data$State, substr(1,nchar-5))
data$state <- lapply(data$State, substr(1,nchar))
data$state <- lapply(data$State, substr(1,nchar())
data$state <- lapply(data$State, substr(1,nchar()-5)
data$state <- lapply(data$State, substr(1,nchar())
data$state <- lapply(data$State, substr(1,nchar()))
data$state <- lapply(data$State, substr(1,nchar()))
data$state <- lapply(data$State, substr(1,nchar))
substr(data[,'State'], 1, nchar(data[,'State'])-3)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
data$state <- substr(data$state,1, nchar(data$state)-5)
data$state <- substr(data$state,1, nchar(data$state)-5)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
data$State[data$State == 'Alabama01'] <- 'Alabama'
data$State[data$State = 'Alabama01'] <- 'Alabama'
data$State[data$State == 'Alabama01'] <- 'Alabama'
data$state <- substr(data$state,1, nchar(data$state))
data$state <- substr(data$state,1, nchar())
data$state <- substr(data$state,1, nchar(data$state)-5)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
data$state <- substr(data$state,1, as.characters(nchar(data$state))-5)
data$state <- substr(data$state,1, as.characters(nchar(data$state))-5)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
data$state <- substr(data$state,1, as.characters(nchar(data$state))-5)
data$state <- substr(data$state,1, nchar(as.character(data$state))-5)
data$state <- substr(data$state,1, nchar(as.character(data$state))-5)
substr(data[,'State'], 1, nchar(data[,'State'])-3)
data$state <- substr(data$state,1, nchar(as.character(data$State))-5)
data$state <- substr(data$state,1, nchar(as.character(data$State))-5)
data$state <- substr(data$state,1, nchar(as.character(data$State))-5)
data$State <- as.character(data$State)
data$state <- substr(data$state,1, nchar(as.character(data$State))-5)
data$State <- as.character(data$State)
data$state <- substr(data$state,1, nchar(data$State)-5)
state_name <- data$State
state_name <- data$State
list_n <- nchar(state_name)
substr(df[,'Names'], 1, nchar(df[,'Names'])-3)
list_n
list_n <- substr(state_name,1,nchar(state_name)-5)
list_n
state <- data$State
state_name <- substr(state,1,nchar(state)-5)
data$state <- state_name
View(data)
state_name <- substr(state,1,nchar(state)-5)
data$state <- state_name
state_name
data$state = state_name
View(data)
data$State<- substr(state,1,nchar(state)-5)
data$State <- as.character(data$State)
state <- data$State
data$State<- substr(state,1,nchar(state)-5)
state <- data$State
data$State<- substr(state,1,nchar(state)-5)
library(dplyr)
library(ggplot2)
library(tidyr)
data <- read.csv("data/intentional_self_harm_data.csv")
state <- data$State
data$State<- substr(state,1,nchar(state)-5)
rm(list=ls())
library(dplyr)
library(ggplot2)
library(tidyr)
data <- read.csv("data/intentional_self_harm_data.csv")
state <- data$State
state.name<- substr(state,1,nchar(state)-5)
data <- read.csv("data/intentional_self_harm_data.csv")
state <- data$State
state.name<- substr(state,1,nchar(state)-5)
state_name<- substr(state,1,nchar(state)-5)
state <- data$State
state
state_name = substr(state,1,nchar(state)-5)
as.character(data$State)
state <- data$State
state_name<- substr(state,1,nchar(state)-5)
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
data$states <- nchar(as.character(data$State))
data$states <- substr(data$State,nchar(as.character(data$State))-5)
data$states <- as.numeric(data$states)
data$new <-substr(data$State, 1, data$states -5)
data <- read.csv("data/intentional_self_harm_data.csv")
as.character(data$State)
data$state_length <- nchar(as.character(data$State))
data$state_length <- as.numeric(data$state_length)
data$state <-substr(data$State, 1, data$state_length -5)
df <- data %>% select(8,2,3,4,5)
View(df)
df <- df %>% mutate(death_rate = Death/Population)
df <- df %>% mutate(death_rate = Death/Population)
df <- df %>% mutate(death_rate = as.numeric(Death)/as.numeric(Population))
df <- data %>% select(8,2,3,4,5)
df <- df %>% mutate(rate = Death/Population)
df <- df %>% mutate(rate = as.numeric(Death)/as.numeric(Population))
df <- df %>% mutate(rate = Death/Population, na.rm = T)
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
source('~/Desktop/HealthReport-TeamBug/Overall-Claire/analysis.R')
